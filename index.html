<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Habit Yearly Heatmap Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .container {
            max-width: 1000px;
            margin-top: 50px;
        }
        .header {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }
        .heatmap {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
        }
        .month {
            display: flex;
            flex-direction: column;
            margin-right: 5px;
        }
        .month-label {
            font-weight: bold;
            text-align: center;
        }
        .day {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            margin-bottom: 2px;
        }
        .completed {
            background-color: #76c7c0;
        }
    </style>
</head>
<body>
<div id="app" class="container">
    <div class="header mb-4">
        <button class="btn btn-secondary mr-2" @click="changeYear(-1)">Previous Year</button>
        <span>{{ currentYear }}</span>
        <button class="btn btn-secondary ml-2" @click="changeYear(1)">Next Year</button>
    </div>

    <div class="month" v-for="month in 12" :key="month">
        <div class="month-label">{{ monthNames[month-1] }}</div>
        <template v-for="dayOfWeek in 7" :key="dayOfWeek">
            <div v-for="day in getDaysInMonth(month, dayOfWeek)" :key="day.dateString" 
                class="day" 
                :class="{ 'completed': habits.some(habit => habit.dates.includes(day.dateString)) }"
                @click="toggleDay(day.dateString)">
                {{ day.day }}
            </div>
        </template>
    </div>
</div>

<script>
new Vue({
    el: '#app',
    data: {
        currentYear: 2024,
        habits: JSON.parse(localStorage.getItem('habits')) || [],
        monthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    methods: {
        getDaysInMonth(month, dayOfWeek) {
            const days = [];
            const date = new Date(this.currentYear, month - 1, 1);
            while (date.getMonth() === month - 1) {
                if (date.getDay() === dayOfWeek - 1) {
                    days.push({
                        day: date.getDate(),
                        dateString: date.toISOString().split('T')[0]
                    });
                }
                date.setDate(date.getDate() + 1);
            }
            return days;
        },
        toggleDay(dateString) {
            this.habits.forEach(habit => {
                const index = habit.dates.indexOf(dateString);
                if (index === -1) {
                    habit.dates.push(dateString);
                } else {
                    habit.dates.splice(index, 1);
                }
            });
            this.saveHabits();
        },
        saveHabits() {
            localStorage.setItem('habits', JSON.stringify(this.habits));
        },
        changeYear(direction) {
            this.currentYear += direction;
            this.habits.forEach(habit => habit.dates = habit.dates.filter(date => date.startsWith(this.currentYear)));
            this.saveHabits();
        }
    },
    mounted() {
        if (!this.habits.length) {
            // Initialize with some example habits
            this.habits = [
                { id: 1, name: 'Exercise', dates: ['2024-06-01', '2024-06-02'] },
                // Add more habits here
            ];
            this.saveHabits();
        }
    }
});
</script>
</body>
</html>
